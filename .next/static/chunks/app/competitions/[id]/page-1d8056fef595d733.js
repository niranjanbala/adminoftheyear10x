(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{1881:(e,s,i)=>{Promise.resolve().then(i.bind(i,7491))},7491:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>b});var t=i(5155),r=i(6117),n=i(2115),l=i(6695),a=i(6126),c=i(285),d=i(704),o=i(9434);let u=d.bL,m=n.forwardRef((e,s)=>{let{className:i,...r}=e;return(0,t.jsx)(d.B8,{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...r})});m.displayName=d.B8.displayName;let x=n.forwardRef((e,s)=>{let{className:i,...r}=e;return(0,t.jsx)(d.l9,{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...r})});x.displayName=d.l9.displayName;let p=n.forwardRef((e,s)=>{let{className:i,...r}=e;return(0,t.jsx)(d.UC,{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...r})});p.displayName=d.UC.displayName;var h=i(8947),f=i(5031),j=i(6874),g=i.n(j);function v(e){var s,i,r;let{competitionId:d}=e,{user:o}=(0,f.A)(),[j,v]=(0,n.useState)(null),[b,N]=(0,n.useState)([]),[y,_]=(0,n.useState)(!0),[w,C]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([h.lX.getById(d),h.x.getByCompetition(d)]);if(v(e),N(s),o){let e=s.find(e=>e.user_id===o.id);C(e||null)}}catch(e){console.error("Error fetching competition data:",e)}finally{_(!1)}})()},[d,o]);let D=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not set",R=b.filter(e=>"approved"===e.status),k=b.filter(e=>"pending"===e.status);return y?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):j?(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:j.title}),(0,t.jsx)(a.E,{className:(e=>{switch(e){case"local":return"bg-green-100 text-green-800 border-green-200";case"national":return"bg-blue-100 text-blue-800 border-blue-200";case"global":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(j.tier),children:j.tier}),(0,t.jsx)(a.E,{className:(e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800 border-gray-200";case"registration_open":return"bg-blue-100 text-blue-800 border-blue-200";case"registration_closed":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"voting_open":return"bg-green-100 text-green-800 border-green-200";case"voting_closed":return"bg-purple-100 text-purple-800 border-purple-200";case"completed":return"bg-red-100 text-red-800 border-red-200"}})(j.status),children:(()=>{if(!j)return"Unknown";let e=new Date,s=j.registration_start?new Date(j.registration_start):null,i=j.registration_end?new Date(j.registration_end):null,t=j.voting_start?new Date(j.voting_start):null,r=j.voting_end?new Date(j.voting_end):null;return"draft"===j.status?"Draft":s&&e<s?"Upcoming":s&&i&&e>=s&&e<=i?"Registration Open":i&&t&&e>i&&e<t?"Registration Closed":t&&r&&e>=t&&e<=r?"Voting Open":r&&e>r?"Completed":"Unknown"})()})]}),j.country&&(0,t.jsxs)("p",{className:"text-lg text-muted-foreground mb-2",children:["\uD83D\uDCCD ",j.country]}),j.description&&(0,t.jsx)("p",{className:"text-lg leading-relaxed",children:j.description})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(()=>{if(!j||!o||w)return!1;let e=new Date,s=j.registration_start?new Date(j.registration_start):null,i=j.registration_end?new Date(j.registration_end):null;return s&&i&&e>=s&&e<=i})()&&(0,t.jsx)(c.$,{size:"lg",asChild:!0,children:(0,t.jsx)(g(),{href:"/competitions/".concat(j.id,"/participate"),children:"Register Now"})}),(()=>{if(!j||!o)return!1;let e=new Date,s=j.voting_start?new Date(j.voting_start):null,i=j.voting_end?new Date(j.voting_end):null;return s&&i&&e>=s&&e<=i})()&&(0,t.jsx)(c.$,{variant:"outline",size:"lg",asChild:!0,children:(0,t.jsx)(g(),{href:"/competitions/".concat(j.id,"/vote"),children:"Vote Now"})}),w&&(0,t.jsxs)(a.E,{variant:"secondary",className:"text-center py-2",children:["You are ",w.status]})]})]}),(0,t.jsxs)(u,{defaultValue:"overview",className:"w-full",children:[(0,t.jsxs)(m,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(x,{value:"overview",children:"Overview"}),(0,t.jsxs)(x,{value:"participants",children:["Participants (",R.length,")"]}),(0,t.jsx)(x,{value:"leaderboard",children:"Leaderboard"}),(0,t.jsx)(x,{value:"rules",children:"Rules"})]}),(0,t.jsx)(p,{value:"overview",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Timeline"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Registration Opens:"}),(0,t.jsx)("span",{children:D(j.registration_start)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Registration Closes:"}),(0,t.jsx)("span",{children:D(j.registration_end)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Voting Opens:"}),(0,t.jsx)("span",{children:D(j.voting_start)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Voting Closes:"}),(0,t.jsx)("span",{children:D(j.voting_end)})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Competition Stats"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Total Participants:"}),(0,t.jsx)("span",{children:R.length})]}),j.max_participants&&(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Max Participants:"}),(0,t.jsx)("span",{children:j.max_participants})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Pending Applications:"}),(0,t.jsx)("span",{children:k.length})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Total Votes:"}),(0,t.jsx)("span",{children:R.reduce((e,s)=>e+s.vote_count,0)})]})]})]})]})}),(0,t.jsx)(p,{value:"participants",className:"space-y-6",children:0===R.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No participants yet."})}):(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(e=>(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center",children:e.user.profile_picture_url?(0,t.jsx)("img",{src:e.user.profile_picture_url,alt:e.user.display_name,className:"w-full h-full rounded-full object-cover"}):e.user.display_name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.user.display_name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Joined ",new Date(e.applied_at).toLocaleDateString()]})]})]}),e.submission_title&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium mb-1",children:e.submission_title}),e.submission_description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.submission_description})]})]})},e.id))})}),(0,t.jsx)(p,{value:"leaderboard",className:"space-y-6",children:0===R.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No participants to show in leaderboard."})}):(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Current Rankings"}),(0,t.jsx)(l.BT,{children:"Live leaderboard showing current vote counts and rankings"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:R.sort((e,s)=>s.vote_count-e.vote_count).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-muted-foreground",children:["#",s+1]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center",children:e.user.profile_picture_url?(0,t.jsx)("img",{src:e.user.profile_picture_url,alt:e.user.display_name,className:"w-full h-full rounded-full object-cover"}):e.user.display_name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.user.display_name}),e.submission_title&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.submission_title})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.vote_count}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"votes"})]})]},e.id))})})]})}),(0,t.jsx)(p,{value:"rules",className:"space-y-6",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Competition Rules"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Qualification Rules"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsx)("li",{children:"• Participants must have a verified HubSpot account"}),(0,t.jsx)("li",{children:"• Registration is required during the registration period"}),(null==(s=j.qualification_rules)?void 0:s.requiresApproval)&&(0,t.jsx)("li",{children:"• All submissions require organizer approval"}),(null==(i=j.qualification_rules)?void 0:i.topN)&&(0,t.jsxs)("li",{children:["• Top ",j.qualification_rules.topN," participants will advance to the next tier"]}),(null==(r=j.qualification_rules)?void 0:r.minVotes)&&(0,t.jsxs)("li",{children:["• Minimum ",j.qualification_rules.minVotes," votes required for advancement"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Voting Rules"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsx)("li",{children:"• Only verified HubSpot users can vote"}),(0,t.jsx)("li",{children:"• One vote per participant per voter"}),(0,t.jsx)("li",{children:"• Voting is only allowed during the voting period"}),(0,t.jsx)("li",{children:"• Vote manipulation or fraud will result in disqualification"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"General Rules"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsx)("li",{children:"• All submissions must be original work"}),(0,t.jsx)("li",{children:"• Participants must comply with HubSpot's terms of service"}),(0,t.jsx)("li",{children:"• Organizers reserve the right to disqualify participants for rule violations"}),(0,t.jsx)("li",{children:"• Decisions by organizers are final"})]})]})]})]})})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Competition Not Found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"The competition you're looking for doesn't exist or has been removed."}),(0,t.jsx)(c.$,{asChild:!0,children:(0,t.jsx)(g(),{href:"/competitions",children:"Back to Competitions"})})]})}async function b(e){let{params:s}=e,{id:i}=await s;return(0,t.jsx)(r.O,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(v,{competitionId:i})})})})}}},e=>{e.O(0,[579,352,874,942,704,657,441,964,358],()=>e(e.s=1881)),_N_E=e.O()}]);